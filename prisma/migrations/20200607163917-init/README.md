# Migration `20200607163917-init`

This migration has been generated by felipekafuri at 6/7/2020, 4:39:17 PM.
You can check out the [state of the schema](./schema.prisma) after the migration.

## Database Steps

```sql
ALTER TABLE "public"."Items" DROP CONSTRAINT IF EXiSTS "Items_pointsId_ItemsToPoints_fkey",
DROP COLUMN "pointsId_ItemsToPoints",
ALTER COLUMN "pointsId" SET DATA TYPE text ;

ALTER TABLE "public"."Items" ADD FOREIGN KEY ("pointsId")REFERENCES "public"."Points"("id") ON DELETE SET NULL  ON UPDATE CASCADE
```

## Changes

```diff
diff --git schema.prisma schema.prisma
migration 20200607153954-init..20200607163917-init
--- datamodel.dml
+++ datamodel.dml
@@ -3,18 +3,17 @@
 }
 datasource db {
   provider = "postgresql"
-  url = "***"
+  url      = env("DATABASE_URL")
 }
 model Items {
-  id                     String  @default(autoincrement()) @id
-  image                  String
-  pointsId               Int?
-  title                  String
-  Points                 Points? @relation(fields: [pointsId_ItemsToPoints], references: [id])
-  pointsId_ItemsToPoints String?
+  id       String  @default(autoincrement()) @id
+  image    String
+  title    String
+  Points   Points? @relation(fields: [pointsId], references: [id])
+  pointsId String?
 }
 model Points {
   id        String  @default(uuid()) @id
@@ -24,6 +23,6 @@
   longitude Float
   name      String  @unique
   uf        String
   whatsapp  String  @unique
-  item      Items[]
+  items     Items[]
 }
```


